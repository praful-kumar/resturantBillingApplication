<div class="main-wraper">
    <!-- <mat-card class="right-card">
        <mat-card-header>
            <mat-card-title>Place Table Order</mat-card-title>
        </mat-card-header>
        <mat-card-content style="text-align: center;">Please select table </mat-card-content>
    </mat-card> -->
    <button mat-raised-button style="width: 100px; top: 20px; right: 50px;  position: absolute;" color="warn"
        (click)="back('dashboard')">Back</button>

    <div class="table-side">
        <div class="tables-container">
            <!-- <h3 style="margin-top: 20px; color: white;">Select Table</h3> -->
            <div class="table" *ngFor="let table of getTables()" (click)="onTableSelect(table)">
                <!-- Adjust styling and content of each table as needed -->
                <span class="blurry-text">Table {{ table }}</span>
            </div>
        
        </div>
        <div class="actions-container">
            <div class="left-action-tab">
                <div class="kot" style=" background-color: #C28954;">Print KOT</div>
                <div class="kot">Duplicate KOT</div>
            </div>
            <div class="right-action-tab">
                <!-- <h2 *ngIf="selectedTable">Bill of Table- {{selectedTable}}</h2>
                <h3 *ngIf="!selectedTable">Please Select Table</h3> -->
                <h4 >Total Amount : {{totalAmount}}</h4>
                <!-- <h3>Tax <input type="number" placeholder="Tax" value="0">%</h3> -->
                <div class="group">
                    <!-- <svg class="icon" aria-hidden="true" viewBox="0 0 24 24"><g><path d="M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z"></path></g></svg> -->
                   <svg class="icon" aria-hidden="true"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 64 64"><defs><linearGradient id="New_Gradient_Swatch_copy" x1="-7.083" y1="59.583" x2="59.937" y2="-7.437" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ab20ec"></stop><stop offset="1" stop-color="#0071fc"></stop></linearGradient><linearGradient id="New_Gradient_Swatch_copy-2" x1="-6.333" y1="60.333" x2="60.687" y2="-6.687" xlink:href="#New_Gradient_Swatch_copy"></linearGradient><linearGradient id="New_Gradient_Swatch_copy-3" x1="-5" y1="61.667" x2="62.021" y2="-5.354" xlink:href="#New_Gradient_Swatch_copy"></linearGradient><linearGradient id="New_Gradient_Swatch_copy-4" x1="-5.278" y1="61.389" x2="61.743" y2="-5.632" xlink:href="#New_Gradient_Swatch_copy"></linearGradient><linearGradient id="New_Gradient_Swatch_copy-5" x1="-0.278" y1="66.389" x2="66.743" y2="-0.632" xlink:href="#New_Gradient_Swatch_copy"></linearGradient><linearGradient id="New_Gradient_Swatch_copy-6" x1="-0.278" y1="66.389" x2="66.743" y2="-0.632" xlink:href="#New_Gradient_Swatch_copy"></linearGradient><linearGradient id="New_Gradient_Swatch_copy-7" x1="-13.611" y1="53.056" x2="53.41" y2="-13.965" xlink:href="#New_Gradient_Swatch_copy"></linearGradient><linearGradient id="New_Gradient_Swatch_copy-8" x1="-11.111" y1="55.556" x2="55.91" y2="-11.465" xlink:href="#New_Gradient_Swatch_copy"></linearGradient><linearGradient id="New_Gradient_Swatch_copy-9" x1="-4.083" y1="62.583" x2="62.937" y2="-4.437" xlink:href="#New_Gradient_Swatch_copy"></linearGradient><linearGradient id="New_Gradient_Swatch_copy-10" x1="-1.583" y1="65.083" x2="65.437" y2="-1.937" xlink:href="#New_Gradient_Swatch_copy"></linearGradient><linearGradient id="New_Gradient_Swatch_copy-11" x1="-0.333" y1="66.333" x2="66.687" y2="-0.687" xlink:href="#New_Gradient_Swatch_copy"></linearGradient><linearGradient id="New_Gradient_Swatch_copy-12" x1="13.667" y1="80.333" x2="80.687" y2="13.313" xlink:href="#New_Gradient_Swatch_copy"></linearGradient></defs><g id="Gradient_ok" data-name="Gradient ok"><path d="M35,63H6a1,1,0,0,1-1-1V2A1,1,0,0,1,6,1H39a1,1,0,0,1,.707.293l13,13A1,1,0,0,1,53,15V35a1,1,0,0,1-2,0V15.414L38.586,3H7V61H35a1,1,0,0,1,0,2Z" style="fill:url(#New_Gradient_Swatch_copy)"></path><path d="M52,16H39a1,1,0,0,1-1-1V2a1,1,0,0,1,1.707-.707l13,13A1,1,0,0,1,52,16ZM40,14h9.586L40,4.414Z" style="fill:url(#New_Gradient_Swatch_copy-2)"></path><path d="M32.89,32a1,1,0,0,1-.915-.594l-3.531-7.944-3.53,7.944a1,1,0,0,1-1.828-.812l4.444-10a1,1,0,0,1,1.828,0l4.445,10A1,1,0,0,1,32.89,32Z" style="fill:url(#New_Gradient_Swatch_copy-3)"></path><path d="M31.411,28.667H25.478a1,1,0,0,1,0-2h5.933a1,1,0,0,1,0,2Z" style="fill:url(#New_Gradient_Swatch_copy-4)"></path><path d="M44,32a1,1,0,0,1-.79-.386l-7.777-10a1,1,0,1,1,1.578-1.228l7.777,10A1,1,0,0,1,44,32Z" style="fill:url(#New_Gradient_Swatch_copy-5)"></path><path d="M36.222,32a1,1,0,0,1-.788-1.614l7.777-10a1,1,0,1,1,1.578,1.228l-7.777,10A1,1,0,0,1,36.222,32Z" style="fill:url(#New_Gradient_Swatch_copy-6)"></path><path d="M22.889,22H14a1,1,0,0,1,0-2h8.889a1,1,0,0,1,0,2Z" style="fill:url(#New_Gradient_Swatch_copy-7)"></path><path d="M18.444,32a1,1,0,0,1-1-1V21a1,1,0,0,1,2,0V31A1,1,0,0,1,18.444,32Z" style="fill:url(#New_Gradient_Swatch_copy-8)"></path><path d="M28,39H13a1,1,0,0,1,0-2H28a1,1,0,0,1,0,2Z" style="fill:url(#New_Gradient_Swatch_copy-9)"></path><path d="M28,44H13a1,1,0,0,1,0-2H28a1,1,0,0,1,0,2Z" style="fill:url(#New_Gradient_Swatch_copy-10)"></path><path d="M23,49H13a1,1,0,0,1,0-2H23a1,1,0,0,1,0,2Z" style="fill:url(#New_Gradient_Swatch_copy-11)"></path><path d="M47,63H43a1,1,0,0,1-1-1V59.585a10.886,10.886,0,0,1-2.36-.981l-1.711,1.709a1,1,0,0,1-1.414,0l-2.828-2.828a1,1,0,0,1,0-1.414l1.709-1.71A10.915,10.915,0,0,1,34.415,52H32a1,1,0,0,1-1-1V47a1,1,0,0,1,1-1h2.415a10.915,10.915,0,0,1,.981-2.361l-1.709-1.71a1,1,0,0,1,0-1.414l2.828-2.828a1,1,0,0,1,1.414,0L39.64,39.4A10.886,10.886,0,0,1,42,38.415V36a1,1,0,0,1,1-1h4a1,1,0,0,1,1,1v2.415a10.886,10.886,0,0,1,2.36.981l1.711-1.709a1,1,0,0,1,1.414,0l2.828,2.828a1,1,0,0,1,0,1.414L54.6,43.639A10.915,10.915,0,0,1,55.585,46H58a1,1,0,0,1,1,1v4a1,1,0,0,1-1,1H55.585a10.915,10.915,0,0,1-.981,2.361l1.709,1.71a1,1,0,0,1,0,1.414l-2.828,2.828a1,1,0,0,1-1.414,0L50.36,58.6a10.886,10.886,0,0,1-2.36.981V62A1,1,0,0,1,47,63Zm-3-2h2V58.8a1,1,0,0,1,.8-.98,8.9,8.9,0,0,0,3.158-1.312,1,1,0,0,1,1.26.126l1.559,1.559,1.414-1.414-1.559-1.559a1,1,0,0,1-.127-1.26A8.862,8.862,0,0,0,53.818,50.8,1,1,0,0,1,54.8,50H57V48H54.8a1,1,0,0,1-.981-.8,8.862,8.862,0,0,0-1.312-3.158,1,1,0,0,1,.127-1.26l1.559-1.559-1.414-1.414-1.559,1.559a1,1,0,0,1-1.26.126A8.9,8.9,0,0,0,46.8,40.181a1,1,0,0,1-.8-.98V37H44v2.2a1,1,0,0,1-.8.98,8.9,8.9,0,0,0-3.158,1.312,1,1,0,0,1-1.26-.126l-1.559-1.559-1.414,1.414,1.559,1.559a1,1,0,0,1,.127,1.26A8.862,8.862,0,0,0,36.182,47.2a1,1,0,0,1-.981.8H33v2h2.2a1,1,0,0,1,.981.8,8.862,8.862,0,0,0,1.312,3.158,1,1,0,0,1-.127,1.26l-1.559,1.559,1.414,1.414,1.559-1.559a1,1,0,0,1,1.26-.126A8.9,8.9,0,0,0,43.2,57.819a1,1,0,0,1,.8.98Z" style="fill:url(#New_Gradient_Swatch_copy-12)"></path><path d="M45,56a7,7,0,1,1,7-7A7.008,7.008,0,0,1,45,56Zm0-12a5,5,0,1,0,5,5A5.006,5.006,0,0,0,45,44Z" style="fill:url(#New_Gradient_Swatch_copy-12)"></path></g></svg>
                    <input placeholder="Tax" type="text" class="inputs">
                  </div>
                <!-- <h3>Discount  <input type="number" value="0" placeholder="Discount">%</h3> -->
                <div class="group">
                    <!-- <svg class="icon" aria-hidden="true" viewBox="0 0 24 24"><g><path d="M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z"></path></g></svg> -->
                    <svg class="icon" aria-hidden="true" id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128"><defs><style>.cls-1{fill:#2d3e50;}</style></defs><title>n</title><path class="cls-1" d="M95.92453,68.52831a6.8347,6.8347,0,0,0-.61829,8.9211,2.91092,2.91092,0,0,0,4.45172.3062,6.795,6.795,0,0,0,.90389-8.52656A2.903,2.903,0,0,0,95.92453,68.52831Z"></path><path class="cls-1" d="M67.1562,50.40934a6.69613,6.69613,0,0,0-.35037,8.89166,2.78265,2.78265,0,0,0,4.25151.22966,6.87177,6.87177,0,0,0,.87738-8.718C70.53915,48.9961,68.81677,48.84006,67.1562,50.40934Z"></path><path class="cls-1" d="M118.2882,24.28147H9.71443a6.16608,6.16608,0,0,0-6.15967,6.157V48.90441a5.05983,5.05983,0,0,0,2.34979,4.28872A12.63413,12.63413,0,0,1,11.94645,64a12.64174,12.64174,0,0,1-6.0419,10.80949,5.052,5.052,0,0,0-2.34979,4.28612V97.56151a6.16606,6.16606,0,0,0,6.15967,6.157H118.2882a6.16382,6.16382,0,0,0,6.157-6.157v-67.123A6.16384,6.16384,0,0,0,118.2882,24.28147Zm-75.69,67.58092a1.96251,1.96251,0,1,1-3.925,0V87.66524a1.96251,1.96251,0,1,1,3.925,0Zm0-16.97962a1.96251,1.96251,0,1,1-3.925,0V70.68824a1.96251,1.96251,0,1,1,3.925,0Zm0-16.977a1.96251,1.96251,0,0,1-3.925,0V53.71124a1.96251,1.96251,0,0,1,3.925,0Zm0-16.9796a1.96251,1.96251,0,1,1-3.925,0V36.73162a1.96251,1.96251,0,0,1,3.925,0ZM62.4719,61.53863a11.77141,11.77141,0,0,1,.898-14.09416,7.69623,7.69623,0,0,1,12.02434.07655c3.98947,4.91986,3.01786,12.64559-2.03447,16.214A7.67071,7.67071,0,0,1,62.4719,61.53863ZM75.80349,81.10912c-.98044,1.5634-1.36025,1.65172-2.92954.68895-2.50262-1.56045-2.51734-1.56928-.98337-4.0189Q81.6287,62.2379,91.38744,46.70548c.82439-1.32492,1.28664-1.41621,2.58507-.6242.6389.371,1.25424.7508,1.83427,1.11294a1.64392,1.64392,0,0,1-.08538,2.14048Q92.21918,54.917,88.70817,60.514,82.247,70.80863,75.80349,81.10912Zm26.20094.88622A7.46219,7.46219,0,0,1,91.80552,80.5821c-4.30745-4.914-3.13857-13.29333,2.29064-16.62328a7.44867,7.44867,0,0,1,9.44224,1.3043C108.03426,70.0711,107.29527,78.262,102.00443,81.99534Z"></path></svg>
                    <input placeholder="Discount" type="text" class="inputs" value={{discountPercent}} (keyup)="applyDiscount($event.target)">
                  </div>
                  <h4>Final Amount: {{discountPrice}}</h4>
                <button class="pay-btn" style="outline: none !important; border: 0px;"
        (click)="checkout()">Checkout </button>
            </div>

            
              
        </div>
       

    </div>
    <div class="billing-side">
        <div class="selected-item">
            <!-- <span >
                {{selectedTable ? "Selected Table "+selectedTable :'Plesae select table' }}</span> -->
            <mat-card style="margin: 10px 10px 10px 10px; background-color: #00000000;">
                <mat-card-content
                    style="text-align:center; font-size: 15px; font-family: Arial, Helvetica, sans-serif; color: white;">{{selectedTable
                    ? "Selected Table "+selectedTable :'Plesae select table' }}</mat-card-content>
            </mat-card>
            <div class="search-tab" style="margin-top: 40px;">

                <mat-form-field style="width: 350px;">
                    <mat-label>Search Menu</mat-label>
                    <input #searchInput placeholder="Search Menu" type="text" matInput [matAutocomplete]="auto"
                        (keyup)="onKey($event.target)" [disabled]="!selectedTable" (keydown.enter)="onEnterPress()" >
                    <mat-autocomplete #auto="matAutocomplete" (optionSelected)="onOptionSelected($event)">
                        <mat-option *ngFor="let menu of filteredMenus" [value]="menu.name">
                            {{ menu.name }} || Price:{{ menu.price }}
                        </mat-option>
                    </mat-autocomplete>
                </mat-form-field>
                <mat-form-field style="width: 90px;">
                    <mat-label>Quantity</mat-label>
                    <input #nextInput #quantityInput placeholder="Quantity" type="number" matInput (keyup)="onKeyQuantity($event.target)"
                    (keydown.enter)="addMenu(searchInput,quantityInput)"  [disabled]="!selectedTable">
                </mat-form-field>
                <button style="height: 55px; margin-bottom:20px; border: 1px solid #673AB7;" mat-raised-button color="primary"
                 [disabled]="!quantity" (click)="addMenu(searchInput,quantityInput)">Add</button>
            </div>
            <div class="Ordered_menu" >
                
                <table  class="billing-table" mat-table [dataSource]="dataSource" *ngIf="dataSource.data.length > 0">
                   
                    <!-- ID Column -->
                    <ng-container matColumnDef="id">
                        <th mat-header-cell *matHeaderCellDef> M.ID </th>
                        <td mat-cell *matCellDef="let element"> {{element.id}} </td>
                    </ng-container>
        
                    <!-- Name Column -->
                    <ng-container matColumnDef="name">
                        <th mat-header-cell *matHeaderCellDef> Name </th>
                        <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                    </ng-container>
                    <ng-container matColumnDef="quantity">
                        <th mat-header-cell *matHeaderCellDef> Qty. </th>
                        <td mat-cell *matCellDef="let element"> {{element.quantity}} </td>
                    </ng-container>
        
                    <!-- Price Column -->
                    <ng-container matColumnDef="price">
                        <th mat-header-cell *matHeaderCellDef> Unit Price </th>
                        <td mat-cell *matCellDef="let element"> {{element.price}} </td>
                    </ng-container>
        
                    <ng-container matColumnDef="total price">
                        <th mat-header-cell *matHeaderCellDef> Total Price </th>
                        <td mat-cell *matCellDef="let element"> {{element.totalPrice}} </td>
                    </ng-container>
                    <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef> Action</th>
                        <td mat-cell *matCellDef="let element" (click)="removeItem(element)"><mat-icon>delete_forever</mat-icon></td>
                    </ng-container>
        
                    <!-- Table Rows -->
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>
            </div>

            <div class="pos-menu" id="menuTable">
                
                <table class="pos-table" *ngIf="dataSource.data.length > 0">
                    
                    <thead >
                        <tr>
                            <th>Item</th>
                            <th>Qty</th>
                            <th>U.Price</th>
                            <th>Price</th>
                        </tr>
                    </thead>


                <tbody>
                    <tr *ngFor="let element of  dataSource.data">
                        <td>{{ element.name }}</td>
                        <td>{{ element.quantity }}</td>
                        <td>{{element.price}}</td>
                        <td>{{ element.totalPrice }}</td>
                    </tr>
                </tbody>
                   
                </table>
                <!-- Additional rows for total amount and discount -->
                <div class="pos-discount" *ngIf="discountPercent > 0">
                    <span>Discount: {{ discountPercent }}%</span>
                </div>
                
                <div class="pos-total-amount">
                    <span>Final Amount: {{ discountPrice }}</span>
                </div>
                
            </div>
            
            
            
            
    
        </div>
    </div>
</div>